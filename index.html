<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#667eea">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Trig Calculator">
    <title>Precision Machining Trig Calculator</title>
    <link rel="manifest" href="data:application/json;base64,ewogICJuYW1lIjogIlByZWNpc2lvbiBNYWNoaW5pbmcgVHJpZyBDYWxjdWxhdG9yIiwKICAic2hvcnRfbmFtZSI6ICJUcmlnIENhbGMiLAogICJkZXNjcmlwdGlvbiI6ICJQcmVjaXNpb24gdHJpZ29ub21ldHJpYyBjYWxjdWxhdG9yIGZvciBtZXRhbCBsYXRoaW5nIGFuZCBtYWNoaW5pbmciLAogICJzdGFydF91cmwiOiAiLiIsCiAgImRpc3BsYXkiOiAic3RhbmRhbG9uZSIsCiAgImJhY2tncm91bmRfY29sb3IiOiAiIzY2N2VlYSIsCiAgInRoZW1lX2NvbG9yIjogIiM2NjdlZWEiLAogICJpY29ucyI6IFsKICAgIHsKICAgICAgInNyYyI6ICJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUIzYVdSMGFEMGlOVEV5SWlCb1pXbG5hSFE5SWpVeE1pSWdkbWxsZDBKdmVEMGlNQ0F3SURVM01pQTFNVElpSUdobGJXNXpQU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh5TURBd0wzTjJaeUkrUEhKbFkzUWdkMmxrZEdnOUlqVXhNaUlnYUdWcFoyaDBQU0kxTVRJaUlHWnBiR3c5SWlNMk5qZGxaV0VpTHo0OGRHVjRkQ0I0UFNJeU5UWWlJSGs5SWpJd01DSWdabWxzYkQwaUkzZG1abVpNSWlCMFpYaDBMV0Z1WTJodmNqMGliV2xrWkd4bElpQm1iMjUwTFdaaGJXbHNlVDBpZG1WeVpHRnVZU3dnYzJGdWN5MXpaWEpwWmlJZ1ptOXVkQzF6YVRwbFBTSXpObkI0SWo0OGRITndZVzRnZUQwaU1qVTJJaUJrZVQwaU5DSStVV0YwYUZOVlpuTnlVRG8rUkc5ZmMyTnlhWEIwUFdScGMzQnNZWGxsY25RaFptOTNiVkZoVDJoU1E0QzlQQzlzYzNraWRWd2laalZFd3IxZUtkd1lYN1lnKKDQ4L2WUOA1TXpsaVdxSUZHYVpDWGxLVF9rZ0oicz0iOWc9PSIsIDEzQllndV9wdlJDWHNDWmMiUG02ZGhhdGJlST0iMTI4IiwKICAgICAgInR5cGUiOiAiaW1hZ2Uvc3ZnK3htbCIKICAgIH0KICBdCn0=">
    <link rel="apple-touch-icon" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDUxMiA1MTIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjUxMiIgaGVpZ2h0PSI1MTIiIGZpbGw9IiM2NjdlZWEiLz48dGV4dCB4PSIyNTYiIHk9IjIwMCIgZmlsbD0iI3dmZmYiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJ2ZXJkYW5hLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjM2cHgiPjx0c3BhbiB4PSIyNTYiIGR5PSI0Ij5UUklHPC90c3Bhbj48L3RleHQ+PHRleHQgeD0iMjU2IiB5PSIzMDAiIGZpbGw9IiNmZmZmIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0idmVyZGFuYSwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIyMHB4Ij5DQUxDPC90ZXh0Pjwvc3ZnPg==">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
        }

        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 30px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .input-section {
            background: linear-gradient(145deg, #f8f9fa, #e9ecef);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
        }

        .input-group {
            display: flex;
            align-items: center;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        label {
            font-weight: bold;
            color: #2c3e50;
            font-size: 1.1em;
        }

        input[type="number"] {
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            width: 80px;
            text-align: center;
            transition: all 0.3s ease;
        }

        input[type="number"]:focus {
            border-color: #667eea;
            outline: none;
            box-shadow: 0 0 10px rgba(102, 126, 234, 0.3);
        }

        .table-container {
            overflow-x: auto;
            overflow-y: auto;
            border-radius: 10px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            background: white;
            max-height: 70vh;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 14px;
        }

        th {
            background: linear-gradient(145deg, #667eea, #764ba2);
            color: white;
            padding: 15px 8px;
            text-align: center;
            font-weight: bold;
            position: sticky;
            top: 0;
            z-index: 10;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        td {
            padding: 10px 8px;
            text-align: center;
            border-bottom: 1px solid #eee;
            transition: background-color 0.2s ease;
        }

        tr:nth-child(even) {
            background-color: #f8f9fa;
        }

        tr:hover {
            background-color: #e3f2fd;
            transform: scale(1.01);
            transition: all 0.2s ease;
        }

        .angle-col {
            background-color: #fff3e0 !important;
            font-weight: bold;
            color: #e65100;
        }

        .function-col {
            font-family: 'Courier New', monospace;
        }

        .error {
            color: #d32f2f;
            font-weight: bold;
        }

        .infinite {
            color: #1976d2;
            font-weight: bold;
        }

        .minute-expand {
            cursor: pointer;
            color: #667eea;
            background: none;
            border: none;
            font-size: 1em;
            padding: 0 6px;
            vertical-align: middle;
        }

        .minute-expand:focus {
            outline: 1px solid #667eea;
        }

        .second-row {
            background-color: #e8f0fe !important;
        }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }

            h1 {
                font-size: 2em;
            }

            table {
                font-size: 12px;
            }

            th, td {
                padding: 8px 4px;
            }
        }

        .legend {
            margin-top: 20px;
            padding: 15px;
            background: #f5f5f5;
            border-radius: 8px;
            font-size: 14px;
            color: #666;
        }
    </style>
</head>
<body>
<div class="container">
    <h1>ðŸ”§ Precision Machining Trigonometric Calculator</h1>

    <div class="input-section">
        <div class="input-group">
            <label for="degrees">Enter Degrees:</label>
            <input type="number" id="degrees" value="30" min="0" max="360" step="1">
            <span>Â°</span>
        </div>
    </div>

    <div class="table-container" style="max-height: 70vh; overflow-y: auto;">
        <table id="trigTable">
            <thead>
            <tr>
                <th>Angle (DÂ°M'S")</th>
                <th>Decimal Degrees</th>
                <th>Radians</th>
                <th>sin(Î¸)</th>
                <th>cos(Î¸)</th>
                <th>tan(Î¸)</th>
                <th>cot(Î¸)</th>
                <th>sec(Î¸)</th>
                <th>csc(Î¸)</th>
            </tr>
            </thead>
            <tbody id="trigTableBody">
            </tbody>
        </table>
    </div>

    <div class="legend">
        <strong>PRECISION MACHINING NOTES:</strong><br>
        â€¢ <strong>Formulas Verified:</strong> sin(Î¸), cos(Î¸), tan(Î¸) = sin(Î¸)/cos(Î¸), cot(Î¸) = cos(Î¸)/sin(Î¸), sec(Î¸) = 1/cos(Î¸), csc(Î¸) = 1/sin(Î¸)<br>
        â€¢ <strong>Precision:</strong> 10 decimal places for machining accuracy | <strong>Undefined:</strong> tan & sec at 90Â°Â±nÃ—180Â°, cot & csc at 0Â°Â±nÃ—180Â°<br>
        â€¢ <strong>Units:</strong> DÂ° = Degrees, M' = Minutes, S" = Seconds | 1Â° = 60', 1' = 60", 1Â° = 3600"<br>
        â€¢ <strong>Machining Applications:</strong> Compound angles, taper calculations, thread pitches, fixture setups
    </div>
</div>

<script>
    // --- UTILS ---
    function formatNumber(num) {
        if (Math.abs(num) > 1000000 || (Math.abs(num) < 0.0000001 && num !== 0)) {
            return num.toExponential(10);
        }
        return Number(num.toFixed(10)).toString();
    }
    function degreesToRadians(degrees) {
        return degrees * Math.PI / 180;
    }
    function formatAngle(degrees, minutes, seconds) {
        return `${degrees}Â°${minutes.toString().padStart(2, '0')}'${seconds.toString().padStart(2, '0')}"`;
    }
    function calculateTrigFunctions(angleInDegrees) {
        const angleInRadians = angleInDegrees * Math.PI / 180;
        const sin = Math.sin(angleInRadians);
        const cos = Math.cos(angleInRadians);
        const tan = Math.tan(angleInRadians);
        const precision = 1e-12;
        const cot = (Math.abs(sin) < precision) ? 'âˆž' : formatNumber(cos / sin);
        const sec = (Math.abs(cos) < precision) ? 'âˆž' : formatNumber(1 / cos);
        const csc = (Math.abs(sin) < precision) ? 'âˆž' : formatNumber(1 / sin);
        const tanValue = (Math.abs(cos) < precision) ? 'âˆž' : formatNumber(tan);
        return {
            sin: formatNumber(sin),
            cos: formatNumber(cos),
            tan: tanValue,
            cot: cot,
            sec: sec,
            csc: csc,
            radians: formatNumber(angleInRadians)
        };
    }

    // --- RENDERING ---
    function makeMinuteRow(baseDegrees, minutes, expanded) {
        let seconds = 0;
        const totalDegrees = baseDegrees + minutes / 60;
        const functions = calculateTrigFunctions(totalDegrees);
        const minuteId = `minute-row-${minutes}`;
        return `
            <tr id="${minuteId}" class="minute-row" data-minute="${minutes}">
                <td class="angle-col">
                    <button class="minute-expand" aria-label="Expand seconds for minute ${minutes}" data-minute="${minutes}">
                        ${expanded ? 'â–¼' : 'â–¶'}
                    </button>
                    ${formatAngle(baseDegrees, minutes, seconds)}
                </td>
                <td>${formatNumber(totalDegrees)}</td>
                <td class="function-col">${functions.radians}</td>
                <td class="function-col">${functions.sin}</td>
                <td class="function-col">${functions.cos}</td>
                <td class="function-col ${functions.tan === 'âˆž' ? 'infinite' : ''}">${functions.tan}</td>
                <td class="function-col ${functions.cot === 'âˆž' ? 'infinite' : ''}">${functions.cot}</td>
                <td class="function-col ${functions.sec === 'âˆž' ? 'infinite' : ''}">${functions.sec}</td>
                <td class="function-col ${functions.csc === 'âˆž' ? 'infinite' : ''}">${functions.csc}</td>
            </tr>
        `;
    }

    function makeSecondRow(baseDegrees, minutes, seconds) {
        const totalDegrees = baseDegrees + minutes / 60 + seconds / 3600;
        const functions = calculateTrigFunctions(totalDegrees);
        return `
            <tr class="second-row" data-minute="${minutes}" data-second="${seconds}">
                <td class="angle-col">${formatAngle(baseDegrees, minutes, seconds)}</td>
                <td>${formatNumber(totalDegrees)}</td>
                <td class="function-col">${functions.radians}</td>
                <td class="function-col">${functions.sin}</td>
                <td class="function-col">${functions.cos}</td>
                <td class="function-col ${functions.tan === 'âˆž' ? 'infinite' : ''}">${functions.tan}</td>
                <td class="function-col ${functions.cot === 'âˆž' ? 'infinite' : ''}">${functions.cot}</td>
                <td class="function-col ${functions.sec === 'âˆž' ? 'infinite' : ''}">${functions.sec}</td>
                <td class="function-col ${functions.csc === 'âˆž' ? 'infinite' : ''}">${functions.csc}</td>
            </tr>
        `;
    }

    function updateTable() {
        const baseDegrees = parseInt(document.getElementById('degrees').value) || 0;
        const tableBody = document.getElementById('trigTableBody');
        tableBody.innerHTML = '';
        // Track which minutes are expanded
        window._minuteExpanded = window._minuteExpanded || {};
        for (let minutes = 0; minutes < 60; minutes++) {
            const expanded = !!window._minuteExpanded[minutes];
            tableBody.insertAdjacentHTML('beforeend', makeMinuteRow(baseDegrees, minutes, expanded));
            if (expanded) {
                for (let seconds = 1; seconds < 60; seconds++) {
                    tableBody.insertAdjacentHTML('beforeend', makeSecondRow(baseDegrees, minutes, seconds));
                }
            }
        }
        addMinuteExpandListeners();
    }

    // --- HANDLERS ---
    function addMinuteExpandListeners() {
        document.querySelectorAll('.minute-expand').forEach(btn => {
            btn.onclick = function (e) {
                const minutes = parseInt(this.getAttribute('data-minute'));
                window._minuteExpanded = window._minuteExpanded || {};
                window._minuteExpanded[minutes] = !window._minuteExpanded[minutes];
                updateTable();
            };
        });
    }

    document.getElementById('degrees').addEventListener('input', function () {
        window._minuteExpanded = {}; // Reset all expanded when degree changes
        updateTable();
    });

    // --- INITIALIZE ---
    window._minuteExpanded = {};
    updateTable();

    // PWA Service Worker Registration (unchanged)
    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('data:application/javascript;base64,Ly8gU2ltcGxlIHNlcnZpY2Ugd29ya2VyIGZvciBvZmZsaW5lIGZ1bmN0aW9uYWxpdHkKY29uc3QgQ0FDSEVfTkFNRSA9ICd0cmlnLWNhbGMtdjEuMCc7CmNvbnN0IHVybHNUb0NhY2hlID0gWycuLyddOwoKc2VsZi5hZGRFdmVudExpc3RlbmVyKCdpbnN0YWxsJywgKGUpID0+IHsKICBlLndhaXRVbnRpbChzZWxmLnNraXBXYWl0aW5nKCkpOwogIGNhY2hlcy5vcGVuKENBQ0hFX05BTUUpLnRoZW4oKGNhY2hlKSA9PiBjYWNoZS5hZGRBbGwodXJsc1RvQ2FjaGUpKTsKfSk7CgpzZWxmLmFkZEV2ZW50TGlzdGVuZXIoJ2ZldGNoJywgKGUpID0+IHsKICBlLnJlc3BvbmRXaXRoKAogICAgY2FjaGVzLm1hdGNoKGUucmVxdWVzdCkudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgcmV0dXJuIHJlc3BvbnNlIHx8IGZldGNoKGUucmVxdWVzdCk7CiAgICB9KQogICk7Cn0pOw==')
            .then(() => console.log('PWA ready for offline use'))
            .catch(err => console.log('Service worker registration failed'));
    }
    // Removed install instructions popup
</script>
</body>
</html>
